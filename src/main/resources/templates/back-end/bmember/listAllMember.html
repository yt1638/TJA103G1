<div th:fragment="content">
	<style>
.memberListContent {
	margin:2%;
	padding: 30px 40px;
	width: 1100px;
	overflow: auto;
	overflow-x: auto !important;
}

/* 標題 */
.memberListH2 {
	font-size: 36px;
	font-family: "Dancing Script", cursive;
	color: #4682b4;
	margin-bottom: 20px;
}

a {
	font-size: 18px;
}

a.back-link {
	display: inline-block;
	margin-bottom: 20px;
	color: #ffffff;
	background: #4a90e2;
	padding: 8px 16px;
	border-radius: 8px;
	text-decoration: none;
	font-weight: 500;
	transition: 0.3s;
}

a.back-link:hover {
	background: #357abd;
}

table {
	width: 100%;
	border-collapse: separate;
	border-spacing: 0 10px;
}

table th {
	background-color: #4a90e2;
	color: #ffffff;
	font-weight: 600;
	padding: 12px;
	border: none;
	border-radius: 8px 8px 0 0;
	text-align: center;
	white-space: nowrap;
}

table td {
	background-color: #fdfdfd;
	padding: 10px;
	border-bottom: 1px solid #e0e0e0;
	border-radius: 4px;
	text-align: center;
	white-space: nowrap;
}

table tr:hover td {
	background-color: #f1f7ff;
}

.mark {
	color: red;
}
input[type="submit"] {
    font-size: 14px;
    background-color: #ff6b6b;
    padding: 6px 16px;
    border-radius: 8px;
    border: none;
    color: #fff;
    cursor: pointer;
    transition: 0.3s;
}

input[type="submit"]:hover {
    background-color: #e14c4c;
}
</style>

	</head>
	<body>
		<div class="content memberListContent">
			<h2 class="memberListH2">會員資料一覽表</h2>
			<h3>
				<a th:href="@{/bmember/select_page}">回後台會員主頁</a>
			</h3>
			<p th:if="${success}" th:text="${success}"></p>
			<table id="allMemberTable">
				<thead>
					<tr>
						<th>會員編號</th>
						<th>會員等級</th>
						<th>帳號(信箱)</th>
						<th>密碼</th>
						<th>姓名</th>
						<th>電話</th>
						<th>生日</th>
						<th>帳號狀態</th>
						<th>註冊時間</th>
						<th>累積消費金額</th>
						<th>喜好電影類型</th>
						<th>修改</th>
					</tr>
				</thead>
				<tbody>
					<th:block th:each="memberVO : ${memberListData}">
						<tr>
							<td th:text="${memberVO.memberId}"></td>
							<td
								th:text="${memberVO.memberClass.memberClassId} + ' (' + ${memberVO.memberClass.memberName} + ')'"></td>
							<td th:text="${memberVO.email}"></td>
							<td th:text="${memberVO.password}"></td>
							<td th:text="${memberVO.name}"></td>
							<td th:text="${memberVO.phone}"></td>
							<td th:text="${memberVO.birthdate}"></td>
							<td th:text="${memberVO.status==0? '啟用' : '停用'}"></td>
							<td
								th:text="${#dates.format(memberVO.createTime, 'yyyy-MM-dd HH:mm')}"></td>
							<td th:text="${memberVO.accConsumption}"></td>
							<td><span
								th:if="${#lists.isEmpty(memberVO.memberPreferType)}">無</span> <span
								th:each="type, stat : ${memberVO.memberPreferType}"> <span
									th:text="${type.movieType.typeName}"></span> <span
									th:if="${!stat.last}">、</span>
							</span></td>

							<td>
								<form th:action="@{/bmember/getOne_For_Update}" method="post">
									<input type="submit" value="修改"> <input type="hidden"
										name="memberId" th:value="${memberVO.memberId}">
								</form>
							</td>
						</tr>
					</th:block>
				</tbody>
			</table>

		</div>
		<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
		<!-- jquery datatables 用 -->
		<script
			src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
		<!-- jquery datatables 用 -->
		<script>
			$(document)
					.ready(
							function() {
								$('#allMemberTable')
										.DataTable(
												{
													"scrollX" : true,
													"lengthMenu" : [ 3, 5, 10,
															20, 50, 100 ],
													"searching" : false, //搜尋功能, 預設是開啟
													"paging" : true, //分頁功能, 預設是開啟
													"ordering" : true, //排序功能, 預設是開啟
													"language" : {
														"processing" : "處理中...",
														"loadingRecords" : "載入中...",
														"lengthMenu" : "顯示 _MENU_ 筆結果",
														"zeroRecords" : "沒有符合的結果",
														"info" : "顯示第 _START_ 至 _END_ 筆結果，共<font color=red> _TOTAL_ </font>筆",
														"infoEmpty" : "顯示第 0 至 0 筆結果，共 0 筆",
														"infoFiltered" : "(從 _MAX_ 筆結果中過濾)",
														"infoPostFix" : "",
														"search" : "搜尋:",
														"paginate" : {
															"first" : "第一頁",
															"previous" : "上一頁",
															"next" : "下一頁",
															"last" : "最後一頁"
														},
														"aria" : {
															"sortAscending" : ": 升冪排列",
															"sortDescending" : ": 降冪排列"
														}
													}
												});
							});
		</script>
</div>